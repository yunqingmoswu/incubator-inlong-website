"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[54118],{3905:(e,n,a)=>{a.d(n,{Zo:()=>c,kt:()=>g});var t=a(67294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=t.createContext({}),p=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},c=function(e){var n=p(e.components);return t.createElement(l.Provider,{value:n},e.children)},h="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),h=p(a),u=r,g=h["".concat(l,".").concat(u)]||h[u]||d[u]||o;return a?t.createElement(g,i(i({ref:n},c),{},{components:a})):t.createElement(g,i({ref:n},c))}));function g(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=u;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[h]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=a[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"},56026:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var t=a(87462),r=(a(67294),a(3905));const o={title:"How to Release",sidebar_position:6},i=void 0,s={unversionedId:"how-to-release",id:"how-to-release",title:"How to Release",description:"This article mainly introduces how to release a new version for Apache InLong in accordance with the Apache requirements. For more guideline, you can refer the following links:",source:"@site/community/how-to-release.md",sourceDirName:".",slug:"/how-to-release",permalink:"/community/how-to-release",draft:!1,editUrl:"https://github.com/apache/inlong-website/edit/master/community/how-to-release.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"How to Release",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"How to Vote a Committer or PMC Member",permalink:"/community/how-to-vote-a-committer-pmc"},next:{title:"How to Verify Release Candidate",permalink:"/community/how-to-verify"}},l={},p=[{value:"Add GPG Key",id:"add-gpg-key",level:2},{value:"Install GPG",id:"install-gpg",level:3},{value:"Generate GPG Key",id:"generate-gpg-key",level:3},{value:"Upload your key to public GPG keyserver",id:"upload-your-key-to-public-gpg-keyserver",level:3},{value:"Check whether the GPG Key is created successfully",id:"check-whether-the-gpg-key-is-created-successfully",level:3},{value:"Upload the GPG public key to SVN repo",id:"upload-the-gpg-public-key-to-svn-repo",level:3},{value:"Upload the GPG public key to your Github account",id:"upload-the-gpg-public-key-to-your-github-account",level:3},{value:"Maven settings",id:"maven-settings",level:2},{value:"Build",id:"build",level:2},{value:"Prepare branch",id:"prepare-branch",level:3},{value:"create tag",id:"create-tag",level:3},{value:"Building source code package",id:"building-source-code-package",level:3},{value:"Building binary package",id:"building-binary-package",level:3},{value:"Sign the source package/binary package/sha512",id:"sign-the-source-packagebinary-packagesha512",level:3},{value:"Check the signature/sha512",id:"check-the-signaturesha512",level:3},{value:"Prepare for Apache release",id:"prepare-for-apache-release",level:2},{value:"Deploy jar to Apache Nexus repository",id:"deploy-jar-to-apache-nexus-repository",level:3},{value:"Upload tag to git repository",id:"upload-tag-to-git-repository",level:3},{value:"Upload tar file to dist repo",id:"upload-tar-file-to-dist-repo",level:3},{value:"Close Apache Staging repository",id:"close-apache-staging-repository",level:3},{value:"Apache InLong community vote",id:"apache-inlong-community-vote",level:2},{value:"Start Vote",id:"start-vote",level:3},{value:"Counting the vote result",id:"counting-the-vote-result",level:3},{value:"Officially release",id:"officially-release",level:2},{value:"Move source code and binary package from DEV to release repository on SVN.",id:"move-source-code-and-binary-package-from-dev-to-release-repository-on-svn",level:3},{value:"Release version in Apache Staging",id:"release-version-in-apache-staging",level:3},{value:"Update Documents and download links on official website",id:"update-documents-and-download-links-on-official-website",level:3},{value:"Send email to <code>dev@inlong.apache.org</code> and CC <code>announce@apache.org</code>",id:"send-email-to-devinlongapacheorg-and-cc-announceapacheorg",level:3},{value:"GitHub release package",id:"github-release-package",level:3},{value:"After the release",id:"after-the-release",level:2},{value:"Clean up temporary files",id:"clean-up-temporary-files",level:3},{value:"Archive the previous version packages",id:"archive-the-previous-version-packages",level:3}],c={toc:p};function h(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,t.Z)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This article mainly introduces how to release a new version for Apache InLong in accordance with the Apache requirements. For more guideline, you can refer the following links:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://infra.apache.org/release-publishing.html"},"ASF Release Creation Process")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.apache.org/legal/release-policy.html"},"ASF Release Policy"))),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"For binary distribution packages, it is necessary to check that the new version does not contain third-party dependencies of class x, including direct reference and indirect reference parts.")),(0,r.kt)("h2",{id:"add-gpg-key"},"Add GPG Key"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"This section is refer to ",(0,r.kt)("a",{parentName:"p",href:"https://infra.apache.org/openpgp.html"},"Cryptography with OpenPGP"),", ",(0,r.kt)("strong",{parentName:"p"}," only for release manager who is the first time to release. "))),(0,r.kt)("h3",{id:"install-gpg"},"Install GPG"),(0,r.kt)("p",null,"For more details, please ref to ",(0,r.kt)("a",{parentName:"p",href:"https://www.gnupg.org/download/index.html"},"Official website"),", configurations under Mac OS:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"$ brew install gpg\n# check the version, should be 2.x\n$ gpg --version\n")),(0,r.kt)("h3",{id:"generate-gpg-key"},"Generate GPG Key"),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Name is best to keep consistent with your full name of Apache ID"),(0,r.kt)("li",{parentName:"ul"},"The mailbox used is apache. It is recommended that pg -k view all the Key ID. If the first one is not the Key ID of the apache mailbox, if you need to specify the Key ID in the step for encryption operation, the parameter is -u"),(0,r.kt)("li",{parentName:"ul"},"Make sure that there is only one key, and delete the keys of other spare mailboxes first"),(0,r.kt)("li",{parentName:"ul"},"Name is best to only use English to avoid garbled"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"$ gpg --full-gen-key\ngpg (GnuPG) 2.2.20; Copyright (C) 2020 Free Software Foundation, Inc.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nPlease select what kind of key you want:\n   (1) RSA and RSA (default)\n   (2) DSA and Elgamal\n   (3) DSA (sign only)\n   (4) RSA (sign only)\n  (14) Existing key from card\nYour selection? 1 # input 1\nRSA keys may be between 1024 and 4096 bits long.\nWhat keysize do you want? (2048) 4096 # input 4096\nRequested keysize is 4096 bits       \nPlease specify how long the key should be valid.\n         0 = key does not expire\n      <n>  = key expires in n days\n      <n>w = key expires in n weeks\n      <n>m = key expires in n months\n      <n>y = key expires in n years\nKey is valid for? (0) 0 # input 0\nKey does not expire at all\nIs this correct? (y/N) y # input y\n\nGnuPG needs to construct a user ID to identify your key.\n\nReal name: Guangxu Cheng # input your name\nEmail address: gxcheng@apache.org # input your emal\nComment:                          # input some annotations, optional\nYou selected this USER-ID:\n    \"Guangxu Cheng <gxcheng@apache.org>\"\n\nChange (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O # input 0\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\n\n# Input the security key\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Please enter this passphrase                         \u2502\n\u2502                                                      \u2502\n\u2502 Passphrase: _______________________________          \u2502\n\u2502                                                      \u2502\n\u2502       <OK>                              <Cancel>     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n# key generatio[n will be done after your inputting the key with the following output\ngpg: key 2DD587E7B10F3B1F marked as ultimately trusted\ngpg: revocation certificate stored as '/Users/cheng/.gnupg/openpgp-revocs.d/41936314E25F402D5F7D73152DD587E7B10F3B1F.rev'\npublic and secret key created and signed.\n\npub   rsa4096 2020-05-19 [SC]\n      41936314E25F402D5F7D73152DD587E7B10F3B1F\nuid                      Guangxu Cheng <gxcheng@apache.org>\nsub   rsa4096 2020-05-19 [E]\n")),(0,r.kt)("h3",{id:"upload-your-key-to-public-gpg-keyserver"},"Upload your key to public GPG keyserver"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"$ gpg --list-keys                                                        \n-------------------------------\npub   rsa4096 2020-05-18 [SC]\n      5931F8CFD04B37A325E4465D8C0D31C4149B3A87\nuid           [ultimate] Guangxu Cheng <gxcheng@apache.org>\nsub   rsa4096 2020-05-18 [E]\n\n# command for sending your key id to key server\n$ gpg --keyserver pgpkeys.mit.edu --send-key <key id>\n# Among them, the keyserver list is: https://sks-keyservers.net/status/, which is automatically synchronized with each other, you can choose any one of them.\n")),(0,r.kt)("h3",{id:"check-whether-the-gpg-key-is-created-successfully"},"Check whether the GPG Key is created successfully"),(0,r.kt)("p",null,"Uploading takes about one minute, after that, you can check it by your email at ",(0,r.kt)("inlineCode",{parentName:"p"},"https://pgpkeys.mit.edu/"),"."),(0,r.kt)("h3",{id:"upload-the-gpg-public-key-to-svn-repo"},"Upload the GPG public key to SVN repo"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The svn repository of the DEV branch is: ",(0,r.kt)("a",{parentName:"p",href:"https://dist.apache.org/repos/dist/dev/inlong"},"https://dist.apache.org/repos/dist/dev/inlong")),(0,r.kt)("p",{parentName:"admonition"},"The svn repository of the Release branch is: ",(0,r.kt)("a",{parentName:"p",href:"https://dist.apache.org/repos/dist/release/inlong"},"https://dist.apache.org/repos/dist/release/inlong"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add the public key to KEYS in the dev branch to release the RC version")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'# As this step will copy all the versions, it will take some time. If the network is broken, please use svn cleanup to delete the lock before re-execute it.\n$ svn co https://dist.apache.org/repos/dist/dev/inlong /tmp/inlong-dist-dev\n$ cd inlong-dist-dev\n# # Append your key to the KEYS file\n$ gpg --export --armor YOUR_NAME@apache.org >> KEYS \n# Later on, if you are asked to enter a username and password, just use your apache username and password.\n$ svn ci -m "add gpg key for YOUR_NAME" \n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add the public key to the KEYS in the release branch for releasing official version")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'$ svn co https://dist.apache.org/repos/dist/release/inlong /tmp/inlong-dist-release\n$ cd inlong-dist-release\n$ gpg --export --armor YOUR_NAME@apache.org >> KEYS \n$ svn ci -m "add gpg key for YOUR_NAME" \n')),(0,r.kt)("h3",{id:"upload-the-gpg-public-key-to-your-github-account"},"Upload the GPG public key to your Github account"),(0,r.kt)("p",null," Enter ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/settings/keys"},"https://github.com/settings/keys")," to add GPG KEYS. Please bind the email address used in the GPG key to your ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/settings/emails"},"GitHub account"),', if you find "unverified" after adding it.'),(0,r.kt)("h2",{id:"maven-settings"},"Maven settings"),(0,r.kt)("p",null,"Adding ",(0,r.kt)("inlineCode",{parentName:"p"},"<servers>/<profiles>")," configurations in your maven ",(0,r.kt)("inlineCode",{parentName:"p"},"settings.xml")," with correct values:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<servers>\n    <server>\n        <id>apache.snapshots.https</id>\n        <username>{Your Apache ID}</username>\n        <password>{Your Apache Password}</password>\n    </server>\n    <server>\n        <id>apache.releases.https</id>\n        <username>{Your Apache ID}</username>\n        <password>{Your Apache Password}</password>\n    </server>\n</servers>\n<profiles>\n    <profile>\n      <id>apache-release</id>\n      <properties>\n        <gpg.keyname>{Your GPG Key ID}</gpg.keyname>\n        <gpg.useagent>true</gpg.useagent>\n        <gpg.passphrase>{Password for you GPG key}</gpg.passphrase>\n      </properties>\n    </profile>\n</profiles>\n")),(0,r.kt)("h2",{id:"build"},"Build"),(0,r.kt)("p",null,"The following ",(0,r.kt)("inlineCode",{parentName:"p"},"release_version")," is the upcoming release number, such as 1.4.0; ",(0,r.kt)("inlineCode",{parentName:"p"},"rc_version")," is Release Candidate, such as RC0, RC1...; ",(0,r.kt)("inlineCode",{parentName:"p"},"KEY_ID")," is your GPG Key ID."),(0,r.kt)("h3",{id:"prepare-branch"},"Prepare branch"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Create the release branch from the main version branch and modify the POM version number and CHANGES.md. For example, create ",(0,r.kt)("inlineCode",{parentName:"p"},"release-1.4.0")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"branch-1.4"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"check the code, including whether compile, unit test, RAT check, Docker images etc."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# build check\n$ mvn clean package -Dmaven.javadoc.skip=true\n# RAT check\n$ mvn apache-rat:check\n# Docker images\n$ mvn clean package -DskipTests -Pdocker\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Make sure code check is pass before executing next step, including compile success, unit test pass, RAT check pass etc.")),(0,r.kt)("h3",{id:"create-tag"},"create tag"),(0,r.kt)("p",null,"Create a tag with annotation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'$ git_tag=${release_version}-${rc_version}\n$ export GPG_TTY=`tty` && git config user.signingkey ${KEY_ID}\n$ git tag -s $git_tag -m "Tagging the ${release_version} first Releae Candidate (Candidates start at zero)"\n')),(0,r.kt)("h3",{id:"building-source-code-package"},"Building source code package"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'$ mkdir /tmp/apache-inlong-${release_version}-${rc_version}\n$ git archive --format=tar.gz --output="/tmp/apache-inlong-${release_version}-${rc_version}/apache-inlong-${release_version}-src.tar.gz" --prefix="apache-inlong-${release_version}/" $git_tag\n')),(0,r.kt)("h3",{id:"building-binary-package"},"Building binary package"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# go to directory where the source code package stay\n$ cd /tmp/apache-inlong-${release_version}-${rc_version} \n# uncompress the tar file\n$ tar xzvf apache-inlong-${release_version}-src.tar.gz \n# go to the source code directory\n$ cd apache-inlong-${release_version}\n# build binary package\n$ mvn compile clean install package -DskipTests\n# for signature convenient, copy the binary package to the source code directory\n$ cp ./inlong-distribution/target/apache-inlong-${release_version}-bin.tar.gz /tmp/apache-inlong-${release_version}-${rc_version}/\n# for signature convenient, copy the connectors binary package to the source code directory\n$ cp ./inlong-distribution/target/apache-inlong-${release_version}-sort-connectors.tar.gz /tmp/apache-inlong-${release_version}-${rc_version}/\n")),(0,r.kt)("h3",{id:"sign-the-source-packagebinary-packagesha512"},"Sign the source package/binary package/sha512"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# \u8fdb\u5165\u6e90\u7801\u5305\u76ee\u5f55\n$ cd /tmp/apache-inlong-${release_version}-${rc_version}\n# calculate SHA512\n$ for i in *.tar.gz; do echo $i; gpg -u ${KEY_ID} --print-md SHA512 $i > $i.sha512 ; done \n# calculate signature\n$ for i in *.tar.gz; do echo $i; gpg -u ${KEY_ID} --armor --output $i.asc --detach-sig $i ; done \n")),(0,r.kt)("h3",{id:"check-the-signaturesha512"},"Check the signature/sha512"),(0,r.kt)("p",null,"Ref\uff1a",(0,r.kt)("a",{parentName:"p",href:"/community/how-to-verify"},"check the candidate version"),", e.g. check the signature:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"$ for i in *.tar.gz; do echo $i; gpg -u ${KEY_ID} --verify $i.asc $i ; done\n")),(0,r.kt)("h2",{id:"prepare-for-apache-release"},"Prepare for Apache release"),(0,r.kt)("h3",{id:"deploy-jar-to-apache-nexus-repository"},"Deploy jar to Apache Nexus repository"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# go to the source code directory\n$ cd /tmp/apache-inlong-${release_version}-${rc_version}/apache-inlong-${release_version}\n# start to upload, and make sure the settings.xml is the file updated before\n$ mvn -DskipTests deploy -Papache-release -Dmaven.javadoc.skip=true\n")),(0,r.kt)("h3",{id:"upload-tag-to-git-repository"},"Upload tag to git repository"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# under the directory where you create the tag\n$ git push origin ${release_version}-${rc_version}\n")),(0,r.kt)("h3",{id:"upload-tar-file-to-dist-repo"},"Upload tar file to dist repo"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Checkout dist repo to local directory")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# As this step will copy all the versions, it will take some time. If the network is broken, please use svn cleanup to delete the lock before re-execute it.\n$ svn co https://dist.apache.org/repos/dist/dev/inlong /tmp/inlong-dist-dev\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add source and binary files and commit to SVN repository")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'$ cd /tmp/inlong-dist-dev\n# create a directory named by version\n$ mkdir ${release_version}-${rc_version} \n# copy source code and signature package to the versioned directory\n$ cp /tmp/apache-inlong-${release_version}-${rc_version}/*tar.gz* ${release_version}-${rc_version}/ \n# check svn status\n$ svn status\n# addi to svn\n$ svn add ${release_version}-${rc_version}\n# check svn status\n$ svn status\n# commit to SVN remote server\n$ svn commit -m "prepare for ${release_version} ${rc_version}"     \n')),(0,r.kt)("h3",{id:"close-apache-staging-repository"},"Close Apache Staging repository"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Login ",(0,r.kt)("a",{parentName:"li",href:"http://repository.apache.org"},"http://repository.apache.org")," with your Apache account"),(0,r.kt)("li",{parentName:"ul"},"Click the Staging repositories on the left "),(0,r.kt)("li",{parentName:"ul"},"Search ",(0,r.kt)("inlineCode",{parentName:"li"},"InLong")," and select the latest unloaded repository"),(0,r.kt)("li",{parentName:"ul"},"Click the close button which will trigger a serials of checks"),(0,r.kt)("li",{parentName:"ul"},"You will get a link like ",(0,r.kt)("inlineCode",{parentName:"li"},"https://repository.apache.org/content/repositories/orgapacheinlong-{staging-id}")," on the Summary page if all checks passed. This link will be posted in the vote email, so, keep it safe.")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Close operation may fail, you should check the causes and fix them.")),(0,r.kt)("h2",{id:"apache-inlong-community-vote"},"Apache InLong community vote"),(0,r.kt)("h3",{id:"start-vote"},"Start Vote"),(0,r.kt)("p",null,"Send email to ",(0,r.kt)("inlineCode",{parentName:"p"},"dev@inlong.apache.org"),", the vote template is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"Title\uff1a[VOTE] Release Apache InLong ${release_version} ${rc_version}\n\nContent\uff1a\n\nHello Apache InLong PMC and Community,\n\n    This is a call for a vote to release Apache InLong version ${release_version}-${rc_version}.\n\n    The tag to be voted on is ${release_version}-${rc_version}:\n\n    https://github.com/apache/inlong/tree/${release_version}-${rc_version}\n\n    The release tarball, signature, and checksums can be found at:\n\n    https://dist.apache.org/repos/dist/dev/inlong/${release_version}-${rc_version}/\n\n    Maven artifacts are available in a staging repository at:\n\n    https://repository.apache.org/content/repositories/orgapacheinlong-{staging-id}\n\n    Artifacts were signed with the {YOUR_GPG_KEY_ID} key, which can be found in:\n\n    https://downloads.apache.org/inlong/KEYS\n\n    ${release_version} includes ~ ${issue_count} bug fixes and improvements done since the last versions, which can be found at:\n\n    https://github.com/apache/inlong/blob/${release_version}-${rc_version}/CHANGES.md\n\n    Please download, verify, and test.\n\n    The VOTE will remain open for at least 72 hours.\n\n    [ ] +1 Release this package as Apache InLong ${release_version}\n    [ ] +0\n    [ ] -1 Do not release this package because...\n\n    To learn more about apache inlong, please see\n    http://inlong.apache.org/\n\n    Checklist for reference:\n\n      [ ] Download links are valid.\n      [ ] Checksums and signatures.\n      [ ] LICENSE/NOTICE files exist\n      [ ] No unexpected binary files\n      [ ] All source files have ASF headers\n      [ ] Can compile from source\n      [ ] All Tests Passed\n\n      More detailed checklist, please refer to the following:\n      https://inlong.apache.org/community/how-to-verify\n\nThanks,\nYour InLong Release Manager\n")),(0,r.kt)("h3",{id:"counting-the-vote-result"},"Counting the vote result"),(0,r.kt)("p",null,"Send email to ",(0,r.kt)("inlineCode",{parentName:"p"},"dev@inlong.apache.org"),", the vote template is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"Title\uff1a[RESULT][VOTE] Release Apache InLong ${release_version} ${rc_version}\n\nContent\uff1a\n\nHello Apache InLong PMC and Community,\n\n    The vote closes now as 72hr have passed. The vote passed with\n    xx (+1 binding) votes from the PMC,\n    xx (+1 non-binding) vote from the rest of the developer community,\n    and no further 0 or -1 votes.\n\n    The voting thread: {vote_mail_address}\n\n    The release is accepted and will be published.\n\nThank you for your support.\nYour InLong Release Manager\n")),(0,r.kt)("h2",{id:"officially-release"},"Officially release"),(0,r.kt)("h3",{id:"move-source-code-and-binary-package-from-dev-to-release-repository-on-svn"},"Move source code and binary package from DEV to release repository on SVN."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'$ svn mv https://dist.apache.org/repos/dist/dev/inlong/${release_version}-${rc_version} https://dist.apache.org/repos/dist/release/inlong/${release_version} -m "Release ${release_version}"\n')),(0,r.kt)("p",null,"Then make sure ",(0,r.kt)("inlineCode",{parentName:"p"},"${release_version}-${rc_version}")," directory is deleted in ",(0,r.kt)("a",{parentName:"p",href:"https://dist.apache.org/repos/dist/dev/inlong/"},"dev"),"."),(0,r.kt)("h3",{id:"release-version-in-apache-staging"},"Release version in Apache Staging"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Log in ",(0,r.kt)("a",{parentName:"li",href:"http://repository.apache.org"},"http://repository.apache.org")," with your Apache account"),(0,r.kt)("li",{parentName:"ul"},"Click the Staging repositories on the left"),(0,r.kt)("li",{parentName:"ul"},"Searching InLong at choose the latest uploaded repository which is specified in the vote email"),(0,r.kt)("li",{parentName:"ul"},"Click the ",(0,r.kt)("inlineCode",{parentName:"li"},"Release")," button above which will trigger a serials of checks")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Wait the repository sync to other repositories which generally takes 24 hours")),(0,r.kt)("h3",{id:"update-documents-and-download-links-on-official-website"},"Update Documents and download links on official website"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Update ",(0,r.kt)("a",{parentName:"p",href:"https://inlong.apache.org/download/"},"download")," resource links")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Create ${release-version} related version document"))),(0,r.kt)("h3",{id:"send-email-to-devinlongapacheorg-and-cc-announceapacheorg"},"Send email to ",(0,r.kt)("inlineCode",{parentName:"h3"},"dev@inlong.apache.org")," and CC ",(0,r.kt)("inlineCode",{parentName:"h3"},"announce@apache.org")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Please make sure deployment in Apache Staging is successfully")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Log in to ",(0,r.kt)("a",{parentName:"p",href:"https://downloads.apache.org/inlong/$%7Brelease-version%7D/"},"https://downloads.apache.org/inlong/${release-version}/")," to see if there is an installation package")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Release announce email, the template is\uff1a"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"Title\uff1a [ANNOUNCE] Release Apache InLong ${release_version}\n\nContent\uff1a\n\nHi all,\n\nThe Apache InLong community is pleased to announce \nthat Apache InLong ${release_version} has been released!\n\nApache InLong is a one-stop integration framework for massive data that provides automatic, secure,\ndistributed, and efficient data publishing and subscription capabilities.\nThis platform helps you easily build stream-based data applications.\n\nThis release contains a number of new features, bug fixes and\nimprovements compared to the last version released before.\nThe notable changes since ${release_version} include:\n\n1. Feature-1\n2. Feature-2\n3. Feature-3\n...\n\n${release_version} since the last versions, which can be found at:\n\nPlease refer to the change log for the complete list of changes:\nhttps://github.com/apache/inlong/blob/release-${release_version}/CHANGES.md\n\nApache InLong website: https://inlong.apache.org/\n\nDownload Links: https://inlong.apache.org/download\n\nInLong Resources:\n- Issue: https://github.com/apache/inlong/issues\n- Mailing list: dev@inlong.apache.org\n\nThanks\nOn behalf of the Apache InLong community\n")),(0,r.kt)("h3",{id:"github-release-package"},"GitHub release package"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/inlong"},"https://github.com/apache/inlong"),", click the + sign under Releases on the right, then click Draft a new release"),(0,r.kt)("li",{parentName:"ul"},"The release title is ${release_version}, upload all files under ",(0,r.kt)("a",{parentName:"li",href:"https://downloads.apache.org/inlong/$%7Brelease-version%7D"},"https://downloads.apache.org/inlong/${release-version}"))),(0,r.kt)("h2",{id:"after-the-release"},"After the release"),(0,r.kt)("h3",{id:"clean-up-temporary-files"},"Clean up temporary files"),(0,r.kt)("p",null,"If the above steps are successful, the version release is booming, and you can clean up local temporary files and conduct community voting."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"$ rm -rf /tmp/apache-inlong-${release_version}-${rc_version}/\n$ rm -rf /tmp/inlong-dist-dev/\n")),(0,r.kt)("h3",{id:"archive-the-previous-version-packages"},"Archive the previous version packages"),(0,r.kt)("p",null,"Delete release package of previous versions ",(0,r.kt)("a",{parentName:"p",href:"https://dist.apache.org/repos/dist/release/inlong/"},"release"),"\uff0cthese packages will be saved ",(0,r.kt)("a",{parentName:"p",href:"https://archive.apache.org/dist/inlong/"},"here")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'# last_release_version is the last version number, you can check is by accessing https://dist.apache.org/repos/dist/release/inlong/ ,e.g 1.3.0\n$ svn delete https://dist.apache.org/repos/dist/release/inlong/${last_release_version} -m "Delete ${last_release_version}"\n')))}h.isMDXComponent=!0}}]);